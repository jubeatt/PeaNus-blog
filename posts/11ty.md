---
title: Eleventy ç­†è¨˜
description: This is a introduction about RxJS .
date: 2023-01-15
tags: Eleventy
layout: layouts/post.njk
---

<!-- summary -->

ç´€éŒ„ä¸€ä¸‹æ¶æ–°éƒ¨è½æ ¼çš„å·¥å…·ã€‚

<!-- summary -->

{% raw %}

## 11ty Config

æ¨è–¦é–±è®€ï¼šhttps://www.11ty.dev/docs/config/

åœ¨æ ¹ç›®éŒ„å»ºç«‹ `.eleventy.js`ï¼Œé€™å€‹æª”æ¡ˆå°±æ˜¯ 11ty çš„ configï¼Œå¯ä»¥åœ¨è£¡é¢å¯«å…¥æˆ‘å€‘æƒ³è¦çš„è¨­å®šï¼š

```javascript
module.exports = function (eleventyConfig) {
  return {
    dir: {
      input: 'src',
      includes: '_includes',
      output: '_site'
    },
    templateFormats: ['md', 'njk', 'html'],
    markdownTemplateEngine: 'njk', // è®“ä½ å¯ä»¥åœ¨ markdown è£¡é¢å¯« njkï¼Œåº•ä¸‹ä»¥æ­¤é¡æ¨ã€‚
    htmlTemplateEngine: 'njk',
    dataTemplateEngine: 'njk'
  }
}
```

## Basic Structure

```bash
â”œâ”€â”€ _site
â”‚Â Â  â”œâ”€â”€ index.html
â”‚Â Â  â””â”€â”€ src
â”‚Â Â      â””â”€â”€ index.html
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ src
    â”œâ”€â”€ _includes
    â”‚Â Â  â””â”€â”€ layouts
    â”‚Â Â      â””â”€â”€ base.html
    â””â”€â”€ index.html
```

å­¸ä»»ä½•ä¸€é …çŸ¥è­˜å‰ï¼Œå…ˆç†è§£å°ˆæ¡ˆçµæ§‹æ˜¯å¾ˆé‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥é€™é‚Šåˆ†åˆ¥èªªæ˜ä¸€ä¸‹ï¼š

- `_site` æ˜¯ç”¢ç”Ÿå¾Œçš„éœæ…‹æª”æ¡ˆ
- `src` é€²å…¥é»
- `src/_includes` æ”¾ç½®æ¨£æ¿çš„åœ°æ–¹
- `src/_includes/layouts/base.html` æ¨£æ¿ä¸€ï¼ˆæ•´å€‹ç¶²ç«™çš„åŸºç¤çµæ§‹ï¼‰
- `src/index.html` ç¶²ç«™é¦–é 

### é‹ç”¨æ¨£æ¿ä¾†å–ä»£ Hardcode

å»¶çºŒå‰›å‰›çš„æª”æ¡ˆçµæ§‹ï¼Œå‡è¨­ç›®å‰é¦–é ï¼ˆ`src/index.html`ï¼‰å…§å®¹æ˜¯é€™æ¨£ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç¶²ç«™æ¨™é¡Œ</title>
  </head>
  <body>
    <h1>é¦–é </h1>
    <p>ä¸€äº›æ•˜è¿°</p>
  </body>
</html>
```

çœ‹èµ·ä¾†å°±æ˜¯ä¸€èˆ¬çš„ HTMLï¼Œæ²’ä»€éº¼å•é¡Œã€‚ä½†æœ‰ä¸€å€‹å•é¡Œæ˜¯ã€Œå¦‚æœæˆ‘æƒ³è¦å†æ–°å¢å…¶ä»–é é¢å‘¢ï¼Ÿã€

å‡è¨­ç¾åœ¨æƒ³æ–°å¢ä¸€å€‹ã€Œé—œæ–¼æˆ‘ã€çš„é é¢ï¼Œé‚£æˆ‘å¯èƒ½å°±éœ€è¦å†å¯«ä¸€ä»½ `about.html`ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>é—œæ–¼æˆ‘</title>
  </head>
  <body>
    <h1>é—œæ–¼æˆ‘</h1>
    <p>ä¸€äº›æ•˜è¿°</p>
  </body>
</html>
```

å¯ä»¥çœ‹åˆ°æˆ‘å€‘åªä¿®æ”¹äº† `<title>` å’Œ `<body>` ä¸­çš„å…§å®¹ï¼Œè€Œå…¶ä»–éƒ¨åˆ†æ˜¯**ä¸€æ¨¡ä¸€æ¨£çš„**ã€‚

é€™é¡¯ç„¶ä¸æ˜¯ä¸€å€‹å¾ˆå¥½çš„åšæ³•ã€‚

åœ¨éå¿…è¦çš„æƒ…æ³ä¸‹æˆ‘å€‘æœƒç›¡å¯èƒ½é¿å…ã€ŒHardcodeï¼ˆå¯«æ­»ï¼‰ã€çš„ä½œæ³•ï¼Œæ‰€ä»¥ 11ty ä¸­å¯ä»¥é€é [Nunjucks](https://mozilla.github.io/nunjucks/) é€™å¥—æ¨¡æ¿å¼•æ“ä¾†è™•ç†ã€‚

é¦–å…ˆï¼Œæˆ‘å€‘å¯ä»¥åœ¨ `src/_includes/layouts` åº•ä¸‹å»ºç«‹ä¸€å€‹ `base.html`ï¼Œä¸¦å¡«å…¥åº•ä¸‹å…§å®¹ï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
  </head>
  <body>
    {{ content | safe }}
  </body>
</html>
```

> ä¸€èˆ¬ä¾†èªªï¼Œä½ æ‡‰è©²æ˜¯å»ºç«‹ä¸€å€‹ `.njk` æª”æ¡ˆï¼Œæ‰æ¥è‘—åœ¨è£¡é¢å¯« HTMLï¼Œè€Œä¸æ˜¯åƒé€™é‚Šå»ºç«‹ä¸€å€‹ .html æª”æ¡ˆï¼Œç„¶å¾Œç›´æ¥åœ¨è£¡é¢å¯« nunjucks çš„èªæ³•ã€‚
> ç‚ºä»€éº¼ï¼Ÿå› ç‚ºæ­£å¸¸çš„ HTML ä¸¦æ²’æœ‰è¾¦æ³•è§£æ nunjucks çš„èªæ³•ã€‚é€™é‚Šä¹‹æ‰€ä»¥èƒ½é€™æ¨£åšæ˜¯å› ç‚ºå‰é¢åœ¨ `.eleventy.js` ä¸­æœ‰å¯«å…¥å°æ‡‰çš„è¨­å®šï¼Œæ‰€ä»¥ eleventy æ‰æœƒçŸ¥é“è¦ç”¨ nunjucks å»è§£æ .html æª”æ¡ˆçš„å…§å®¹ã€‚

æ¨¡æ¿çš„å¥½è™•å°±æ˜¯å¯ä»¥åœ¨è£¡é¢åŠ å…¥ã€Œè®Šæ•¸ã€æµç¨‹åˆ¤æ–·ã€ç­‰ç¨‹å¼èªè¨€çš„ç‰¹æ€§ã€‚é€™é‚Šåœ¨ `<tilte>` ä¸­æ”¾å…¥äº†ä¸€å€‹ `{{ title }}`ï¼Œæ„æ€æ˜¯èªªè£¡é¢çš„æ–‡å­—è¦æ˜¯ `title` é€™å€‹è®Šæ•¸çš„å€¼ï¼Œè€Œ `<body>` ä¹Ÿæ˜¯åŒæ¨£çš„æ¦‚å¿µã€‚

ä¸éä½ å¯èƒ½æœƒæƒ³å•ã€Œé‚£ `title` å’Œ `content` é€™å…©å€‹è®Šæ•¸è¦å¾å“ªè£¡ä¾†ï¼Ÿé‚„æœ‰ï¼Œ`content` å¾Œé¢çš„ `| safe` åˆæ˜¯ä»€éº¼æ±è¥¿ï¼Ÿã€

å›ç­”ç¬¬ä¸€å€‹å•é¡Œå‰ï¼Œæˆ‘å€‘å…ˆæŠŠ `src/index.html` åšé»ä¿®æ”¹ï¼š

```html
---
layout: layouts/base.html
title: Learn 11ty
---

<h1>I am the Home Page.</h1>
<p>
  Lorem ipsum dolor sit, amet consectetur adipisicing elit. Odio quidem non dolor, placeat
  blanditiis quas itaque distinctio optio aperiam. Tenetur sequi quasi ea perferendis iste quia
  itaque fugit, distinctio magni.
</p>
```

è¨»ï¼šå†æé†’ä¸€æ¬¡ï¼Œä¹‹æ‰€ä»¥èƒ½ç›´æ¥åœ¨ HTML ä¸­å¯« Front Matter çš„èªæ³•æ˜¯å› ç‚ºåœ¨ `eleventy.js` ä¸­æœ‰åšè¨­å®šã€‚

æŠŠæ±è¥¿å¯«åœ¨ `---` è£¡é¢çš„é€™ç¨®å¯«æ³•å«åšã€ŒFront Matterã€ï¼Œæ˜¯ markdown æä¾›çš„ä¸€ç¨®èªæ³•ï¼Œä¸€èˆ¬æ˜¯ç”¨ä¾†å¯«å…¥ç¶²é çš„ meta è³‡è¨Šã€‚

é€™è£¡åœ¨ Front Matter ä¸­æŒ‡å®šäº† `layout: layouts/base.html`ï¼Œä»£è¡¨èªªé€™é‚Šçš„å…§å®¹è¦å¥—åˆ°ç”¨å‰é¢å¯«å¥½çš„æ¨£æ¿ï¼Œä¸¦ä¸”ä¹ŸæŒ‡å®šäº† `title` çš„å…§å®¹ã€‚

çœ‹åˆ°é€™é‚Šï¼Œæ‡‰è©²ä¸é›£çŒœåˆ° `title` å’Œ `body` é€™å…©å€‹è®Šæ•¸çš„å€¼å°±æ˜¯å¾é€™é‚Šä¾†çš„ï¼Œå€¼æœƒæ˜¯ `Learn 11ty` å’Œ `<body>` ä¸­çš„å…§å®¹ã€‚

è‡³æ–¼ç¬¬äºŒå€‹å•é¡Œï¼Œè¦å…ˆçŸ¥é“ `|` æ˜¯ nunjucks ä¸­çš„ [Filter](https://mozilla.github.io/nunjucks/templating.html#filters)ã€‚åŠŸèƒ½å°±è·Ÿ CLI è£¡é¢çš„é‚£å€‹ `|` å·®ä¸å¤šï¼ŒæœƒæŠŠå‰é¢çš„æ±è¥¿ã€Œæ¥éä¾†ã€åšä¸€äº›è™•ç†ã€‚

æ‰€ä»¥é€™è£¡çš„ `| safe` å¾ˆæ˜é¡¯æ˜¯æŠŠå‰é¢çš„å­—ä¸²éƒ½åšã€Œè·³è„«ã€çš„è™•ç†ï¼Œä¸»è¦æ˜¯ç‚ºäº†é¿å… XSS çš„å•é¡Œã€‚

é™¤äº†ä¸Šé¢é€™ç¨®æ‹¿å¯«å¥½çš„æ¨£æ¿ä¾†ç”¨ä»¥å¤–ï¼Œnunjucks é‚„æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œåƒæ˜¯ `extends` æˆ– `include` ç­‰ç­‰ï¼Œåœ¨å¯¦å‹™ä¸Šæœƒè »å¸¸çœ‹åˆ°å®ƒå€‘çš„ï¼Œæ‰€ä»¥å¼·çƒˆå»ºè­°ç¢°åˆ°ä¸æ‡‚çš„èªæ³•æ™‚å¯ä»¥åˆ° nunjucks çš„ [å®˜æ–¹æ–‡ä»¶](https://mozilla.github.io/nunjucks/templating.html) ä¸­æŸ¥é–±ã€‚

## è®€å–éœæ…‹è³‡æº

æ¨è–¦é–±è®€ï¼šhttps://www.11ty.dev/docs/copy/

å‡è¨­ç›®å‰å°ˆæ¡ˆçš„è³‡æ–™çµæ§‹é•·é€™æ¨£ï¼š

```text
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ src
    â”œâ”€â”€ _includes
    â”‚Â Â  â”œâ”€â”€ head.html
    â”‚Â Â  â””â”€â”€ layouts
    â”‚Â Â      â”œâ”€â”€ base.html
    â”‚Â Â      â””â”€â”€ contact.html
    â”œâ”€â”€ assets <- æ–°å¢ assets è³‡æ–™å¤¾
    â”‚Â Â  â””â”€â”€ images
    â”‚Â Â      â””â”€â”€ carbon.png
    â”œâ”€â”€ contact.html
    â””â”€â”€ index.html
```

é€™æ™‚å€™ä½ å¯èƒ½æœƒæƒ³åœ¨æ¨¡æ¿ä¸­å­˜å–åœ¨ `assets` ä¸­éœæ…‹è³‡æºï¼Œé€™äº›è³‡æºå¯ä»¥æ˜¯åœ–ç‰‡ã€å½±ç‰‡æˆ– CSS ç­‰ç­‰ã€‚ä¸éç•¶ä½ å¯«å¥½è·¯å¾‘å¾Œä½ æœƒå°±ç™¼ç¾å­˜å–ä¸åˆ°ï¼Œé€™æ˜¯ç‚ºä»€éº¼å‘¢ï¼Ÿ

é€™æ˜¯å› ç‚º 11ty é è¨­ä¸æœƒæŠŠ `.html` ä»¥å¤–çš„æª”æ¡ˆæˆ–è³‡æ–™å¤¾ç”¢ç”Ÿåˆ° `_site` åº•ä¸‹ï¼Œæ‰€ä»¥å¿…é ˆåœ¨ config åŠ å…¥ `addPassthroughCopy` ä¾†è™•ç†ï¼š

```javascript
module.exports = function (eleventyConfig) {
  // æŠŠæŒ‡å®šè·¯å¾‘çš„å…§å®¹è¤‡è£½åˆ° _site ä¸‹
  eleventyConfig.addPassthroughCopy('src/assets')

  return {
    dir: {
      input: 'src',
      includes: '_includes',
      output: '_site'
    },
    templateFormats: ['md', 'njk', 'html'],
    markdownTemplateEngine: 'njk',
    htmlTemplateEngine: 'njk',
    dataTemplateEngine: 'njk'
  }
}
```

è¨­å®šå¥½ 11ty ä»¥å¾Œæ•´å€‹ `assets` å°±æœƒè¢«è¤‡è£½éå»ï¼Œè‡ªç„¶å°±èƒ½è®€å–åˆ°å°æ‡‰çš„è³‡æ–™äº†ã€‚

## åƒå…ƒä»¶ä¸€æ¨£çš„ Shortcode

æ¨è–¦é–±è®€ï¼šhttps://www.11ty.dev/docs/shortcodes/

11ty æä¾›äº† Shortcode çš„åŠŸèƒ½ï¼Œè®“ä½ å¯ä»¥ç”¨å¾ˆåƒ Component çš„æ¦‚å¿µä¾†å°è£ä¸€æ®µ HTMLï¼Œæˆ‘å€‘ç›´æ¥ä¾†çœ‹ç¯„ä¾‹ã€‚

é¦–å…ˆåˆ° `_includes` åº•ä¸‹å»ºç«‹ä¸€å€‹ `Card.js`ï¼š

```javascript
const { html } = require('common-tags')

function Card({ title, link, linkText, raised }) {
  return html`
    <div class="card__container blah blah ${raised ? 'card__container--raised' : ''}">
      <h2 class="card__title">${title}</h2>
      <a class="card__link" href="${link}">${linkText}</a>
    </div>
  `
}

module.exports = Card
```

è¨»ï¼šé€™é‚Šçš„ `html`ï¼ˆæ¨£æ¿å­—ä¸²ï¼‰æ˜¯ [common-tags](https://www.npmjs.com/package/common-tags) æä¾›çš„åŠŸèƒ½ã€‚

æ¥è‘—åˆ° `.eleventy.js` åŠ å…¥é€™æ®µï¼š

```javascript
// åˆ¥å¿˜äº†å¼•å…¥
const Card = require('./src/_includes/components/card')

module.exports = function (eleventyConfig) {
  eleventyConfig.addPassthroughCopy('src/assets')
  eleventyConfig.addPassthroughCopy('src/css')

  // åŠ ä¸Šé€™ä¸€è¡Œ
  eleventyConfig.addShortcode('Card', Card)

  return {
    dir: {
      input: 'src',
      includes: '_includes',
      output: '_site'
    },
    templateFormats: ['md', 'njk', 'html'],
    markdownTemplateEngine: 'njk',
    htmlTemplateEngine: 'njk',
    dataTemplateEngine: 'njk'
  }
}
```

æ¥ä¸‹ä¾†åœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥é€™æ¨£ä½¿ç”¨ï¼š

```html
{% Card title="Hello", link="https://google.com", linkText="Go to Google" %}
```

è¨»ï¼šè¨˜å¾—è¦æ¯å€‹åƒæ•¸é–“è¦ç”¨ `,` ä¾†éš”é–‹ã€‚

## Collections

æ¨è–¦é–±è®€ï¼šhttps://www.11ty.dev/docs/collections/

collections æ˜¯ç”¨ä¾†å­˜å–åœ¨ Front Matter ä¸­æœ‰ä½¿ç”¨ tags æ¨™è¨»çš„å…§å®¹ï¼Œä¾‹å¦‚èªªï¼š

```text
---
title: Rxjs Crash Course
description: This is a post on  about Rxjs Crash Course.
date: 2018-08-25
layout: layouts/post.html
tags: posts
---

...
```

æƒ³åƒé€™æ˜¯éƒ¨è½æ ¼è£¡é¢çš„æŸä¸€ç¯‡æ–‡ç« ï¼Œä¸¦ä¸”æŠŠ `tags` è¨­ç‚º `posts`ï¼Œé€™æ¨£çš„ç”¨é€”æ˜¯ä»€éº¼ï¼Ÿ

åœ¨ 11ty ä¸­ `tags` æ˜¯ä¸€å€‹æ¯”è¼ƒç‰¹åˆ¥çš„å±¬æ€§ï¼Œä¸€æ—¦è¨­ç½®äº†é€™å€‹å±¬æ€§å¾Œå°±æœƒ 11ty å°±æœƒè‡ªå‹•ç”¢ç”Ÿä¸€çµ„å°æ‡‰çš„ collectionsã€‚ä»¥ä¸Šé¢çš„ä¾‹å­ä¾†èªªï¼Œæˆ‘å€‘è¨­ç½®äº† `tags: posts`ï¼Œæ‰€ä»¥å°±æœƒç”¢ç”Ÿä¸€çµ„å«åš `posts` çš„ collectionsã€‚

collections å¯ä»¥åšä»€éº¼ï¼Ÿé€™é‚Šä¾†èˆ‰å€‹ä¾‹å­ã€‚

å‡è¨­ä½ æƒ³è¦æœ‰ä¸€å€‹é¡¯ç¤ºã€Œæ–‡ç« åˆ—è¡¨ã€çš„é é¢ï¼Œä½ å¯ä»¥é€é collections ä¾†æŠŠæ‰€æœ‰ `posts` çš„æ–‡ç« è³‡æ–™éƒ½æ‹¿å‡ºä¾†ï¼š

```html
<h1>Posts</h1>

<ul>
  {% for post in collections.posts %}
  <li>
    <a href="{{ post.url }}">{{ post.data.title }} at {{ post.data.date }}</a>
  </li>
  {% endfor %}
</ul>
```

é€™è£¡ç”¨äº†è¿´åœˆä¾†éæ­· `collections.posts` é€™å€‹é™£åˆ—ï¼Œä¸¦ä¸”æŠŠæ–‡ç« çš„ `url`ã€`title` å’Œ `date` çµ¦å–å‡ºä¾†æ¸²æŸ“åˆ°ç•«é¢ä¸Šã€‚

å°±è·Ÿå‰é¢èªªçš„ä¸€æ¨£ï¼Œåªè¦æœ‰ä½¿ç”¨ `tags: posts` çš„æ–‡ç« éƒ½æœƒå‡ºç¾åœ¨ `collections.posts` ä¸­ï¼Œé€™æ˜¯ 11ty è‡ªå‹•åœ¨èƒŒå¾Œå¹«æˆ‘å€‘ç”¢ç”Ÿçš„ collectionsï¼Œæ‰€ä»¥æˆ‘å€‘æ‰å¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­å­˜å–åˆ°ã€‚

é™¤äº†æ–‡ç« è‡ªèº«çš„ Front Matter è³‡è¨Šä»¥å¤–ï¼Œ11ty ä¹Ÿæœƒè‡ªå‹•åŠ å…¥ä¸€äº›æœ‰ç”¨çš„è³‡è¨Šï¼Œåƒé€™è£¡å°±ç”¨åˆ°äº† `url`ï¼Œé€™æ˜¯å¾ˆæœ‰ç”¨çš„è³‡æ–™ï¼

### å»ºç«‹è‡ªå·±çš„ collections

é™¤äº†é€é `tags` ä¾†ç”¢ç”Ÿ collections ä»¥å¤–ï¼Œä¹Ÿå¯ä»¥é€é `.eleventy.js` ä¾†æ·»åŠ æˆ‘å€‘è‡ªå·±çš„ collectionsã€‚

é›–ç„¶å‰›å‰›æœ‰èªªæˆ‘å€‘å¯ä»¥åœ¨æ¯ä¸€ç¯‡æ–‡ç« åŠ ä¸Š `tags: post` ä¾†ç”¢ç”Ÿ collectionï¼Œä½†å¦‚æœæ¯ä¸€ç¯‡æ–‡ç« éƒ½è¦è‡ªå·±æ‰‹å‹•åŠ å…¶å¯¦é‚„è »éº»ç…©çš„ï¼Œå°å§ï¼Ÿ

æ‰€ä»¥æˆ‘å€‘å¯ä»¥ç›´æ¥å‘Šè¨´ 11tyã€Œè«‹ç›´æ¥å¹«æˆ‘æŠŠ xx è·¯å¾‘åº•ä¸‹çš„æ‰€æœ‰ `.md` æª”æ¡ˆå»ºç«‹æˆä¸€ä»½ collectionsã€ï¼Œåƒé€™æ¨£ï¼š

```javascript
module.exports = function (eleventyConfig) {
  eleventyConfig.addCollection('posts', function (collectionApi) {
    return collectionApi.getFilteredByGlob('src/blog/posts/**/*.md')
  })
}
```

é€™é‚Šç”¨äº† `addCollection` ä¾†å»ºç«‹ä¸€å€‹æ–°çš„ collectionsï¼ˆ`post`ï¼‰ï¼Œæ¥è‘—åœ¨å‚³å…¥ä¸€å€‹ callback ä¾†å›å‚³é€™å€‹ collections çš„å…§å®¹ã€‚é€™å€‹ callback æœƒè‡ªå‹•æ¥æ”¶ä¸€å€‹ `collectionApi`ã€‚å¦‚å…¶åï¼Œå®ƒå°±æ˜¯å€‹ 11ty æä¾›çš„ APIï¼Œä½ å¯ä»¥ç”¨å®ƒä¾†å–å¾—ä½ æƒ³è¦çš„è³‡æ–™ï¼Œé€™é‚Šæ˜¯ç”¨ glob èªæ³•ä¾†æŠŠæ‰€æœ‰ `src/blog/posts` åº•ä¸‹çš„ `.md` æª”éƒ½å–å‡ºã€‚

é€éé€™æ®µè¨­å®šå¾Œï¼Œå°±ä¸éœ€è¦å†å¹«æ¯ä¸€ç¯‡æ–‡ç« éƒ½åŠ ä¸Š `tags: posts` äº†ï¼Œå¯ä»¥ç›´æ¥é€é `collections.posts` ä¾†å­˜å–ç›¸åŒçš„è³‡æ–™ã€‚

## Pagination

æ¨è–¦é–±è®€ï¼šhttps://www.11ty.dev/docs/pagination/

ã€Œåˆ†é ã€æ‡‰è©²æ˜¯å¾ˆå¸¸è¦‹çš„éœ€æ±‚ï¼Œæ‰€ä»¥é€™é‚Šä¾†ä»‹ç´¹å¦‚ä½•åœ¨ä¸€å€‹é é¢ä¸­é€éåˆ†é ä¾†é¡¯ç¤ºéƒ¨åˆ†è³‡æ–™ã€‚

### åŸºæœ¬ç¯„ä¾‹

åˆ†é èƒŒå¾Œçš„åŸç†æ˜¯åˆ©ç”¨å–®ä¸€å€‹ template ä¾†ç”¢ç”Ÿå‡ºå¤šå€‹ templateï¼Œå› ç‚ºåªè¦è®“æ¯ä¸€å€‹ template æ‹¿åˆ°çš„**è³‡æ–™**æ˜¯ä¸åŒçš„ï¼Œå°±èƒ½æ¸²æŸ“å‡ºä¸åŒçš„å…§å®¹äº†ã€‚

é€™é‚Šä¾†çœ‹å®˜ç¶²é™„çš„ç¯„ä¾‹ï¼š

```html
---
pagination:
  data: testdata
  size: 2
testdata:
  - item1
  - item2
  - item3
  - item4
---

<ol>
  {%- for item in pagination.items %}
  <li>{{ item }}</li>
  {% endfor -%}
</ol>
```

å‡è¨­é€™å€‹é é¢æ˜¯åœ¨ `/paged` è·¯å¾‘çš„è©±ï¼Œ11ty å°±æœƒæ‹¿é€™å€‹æ¨¡æ¿å‡ºç”¢ç”Ÿå‡º `_site/paged/index.html` å’Œ `_site/paged/1/index.html` å…©å€‹é é¢ã€‚

è¦å•Ÿç”¨ pagination çš„æ­¥é©Ÿæœ‰å…©å€‹ï¼š

1. åœ¨ Front Matter ä¸­åŠ å…¥ `pagination`ã€‚`data` æ˜¯ç”¨ä¾†ç”¢ç”Ÿåˆ†é çš„è³‡æ–™ä¾†æºï¼Œ`size` å‰‡æ˜¯æ¯ä¸€å€‹é é¢è¦é¡¯ç¤ºå¹¾ç­†è³‡æ–™
2. é€é `pagination` ç‰©ä»¶æŠŠè³‡æ–™æ¸²ç„¶åˆ° template ä¸­

è½èµ·ä¾†ä¸è¤‡é›œå§ï¼ä¸éé‡é»æ˜¯ `pagination` çš„å…§å®¹æ˜¯ä»€éº¼ï¼Ÿå®˜æ–¹å·²ç¶“å¾ˆè²¼å¿ƒçš„å…ˆå¹«ä½ åˆ—å‡ºä¾†äº†ï¼š

```javascript
{
  items: [], // ç›®å‰é é¢ä¸­è©²å‡ºç¾çš„è³‡æ–™
  pageNumber: 0, // ç›®å‰çš„é æ•¸

  hrefs: [], // æ‰€æœ‰åˆ†é çš„è·¯å¾‘ï¼ˆä¾åºï¼‰
  href: {
    next: "â€¦", // ä¸‹ä¸€é çš„é€£çµ
    previous: "â€¦", // ä¸Šä¸€é çš„é€£çµ
    first: "â€¦", // é¡æ¨...
    last: "â€¦", // é¡æ¨...
  },

  pages: [], // æ‰€æœ‰é é¢çš„è³‡æ–™ï¼ˆä¾åºï¼‰
  page: {
    next: {}, // ä¸‹ä¸€é çš„è³‡æ–™
    previous: {}, // ä¸Šä¸€é çš„è³‡æ–™
    first: {}, // é¡æ¨...
    last: {}}, // é¡æ¨...
  }
}
```

æ‰€ä»¥ä¸Šé¢ç”¨ `for item in pagination.items` å°±å¯ä»¥æŠŠç•¶å‰é é¢çš„è³‡æ–™å–å‡ºä¸¦æ¸²æŸ“å‡ºä¾†ã€‚

11ty çš„ pagination ç‰©ä»¶æä¾›äº†å¾ˆå¤šçš„æœ‰ç”¨çš„è³‡è¨Šï¼Œåªè¦çŸ¥é“å¦‚ä½•åˆ©ç”¨é€™äº›è³‡è¨Šå°±å¯ä»¥å®Œæˆå¤§å¤šæ•¸çš„åˆ†é åŠŸèƒ½å›‰ã€‚

### ä¸Šä¸€é  / ä¸‹ä¸€é åŠŸèƒ½

å‰é¢å·²ç¶“ä»‹ç´¹éåˆ†é çš„è™•ç†ï¼Œç¾åœ¨ä¾†åŠ ä¸Šã€Œåˆ‡æ›é é¢ã€çš„åŠŸèƒ½å§ï¼ä¸€æ¨£å…ˆä¾†çœ‹æ®µç¯„ä¾‹ï¼š

```html
---
pagination:
  data: testData
  size: 2
testData: [item1, item2, item3, item4]
---

<h1>Paged List</h1>

<!-- æ–‡ç« åˆ—è¡¨ -->
<ul>
  {% for item in pagination.items %}
  <li>{{ item }}</li>
  {% endfor %}
</ul>
<!-- ä¸Šä¸€é æŒ‰éˆ• -->
{% if pagination.href.previous %}
<a href="{{ pagination.href.previous }}">Prev</a>
{% endif %}

<!-- ä¸‹ä¸€é æŒ‰éˆ• -->
{% if pagination.href.next %}
<a href="{{ pagination.href.next }}">Next</a>
{% endif %}
```

çµæ§‹ä¸Šè·Ÿå‰é¢çš„ç¯„ä¾‹å·®ä¸å¤šï¼Œç¾åœ¨åªæ˜¯å¤šç”¨äº† `pagination.href` çš„è³‡è¨Šä¾†åŠ ä¸Šä¸Šä¸€é å’Œä¸‹ä¸€é çš„æŒ‰éˆ•è€Œå·²ï¼Œç›¸ä¿¡æ‡‰è©²ä¸é›£ç†è§£ã€‚

æœ€å¾Œæ¸²æŸ“å‡ºä¾†çš„ç•«é¢æœƒé•·é€™æ¨£ï¼š

![pagination-items](/img//posts/11ty/pagination-items.png)

å¦‚æœä½ æƒ³æ”¹æˆé ç¢¼çš„å½¢å¼çš„è©±ï¼Œä¹Ÿå¯ä»¥é€™æ¨£å¯«ï¼š

```html
---
pagination:
  data: testData
  size: 2
testData: [item1, item2, item3, item4, item5, item6, item7, item8, item9, item10, item11]
---

<h1>Paged List</h1>

<!-- æ–‡ç« åˆ—è¡¨ -->
<ul>
  {% for item in pagination.items %}
  <li>{{ item }}</li>
  {% endfor %}
</ul>

<!-- é ç¢¼æŒ‰éˆ• -->
{% for n in range(0, pagination.pages.length) %}
<a href="{{ pagination.hrefs[n] }}">{{ n+1 }}</a>
{% endfor %}
```

è¨»ï¼šé ç¢¼çš„å¯«æ³•æœ‰å¾ˆå¤šç¨®ï¼Œä¹Ÿå¯ä»¥åƒè€ƒå®˜æ–¹æä¾›çš„ [ç¯„ä¾‹](https://www.11ty.dev/docs/pagination/nav/#starter-example)ã€‚

é€™æ¨£å­æŒ‰éˆ•å°±æœƒç”¨ `1 2 3 4...` çš„æ–¹å¼ä¾†å‘ˆç¾ï¼Œä¸éé€™è£¡åªæ˜¯ç¤ºç¯„åŸºæœ¬æ¦‚å¿µï¼Œç´°ç¯€çš„éƒ¨åˆ†å°±äº¤çµ¦ä½ ä¾†è™•ç†å›‰ï¼

## å…¶ä»–è£œå……

é€™é‚Šæ˜¯æˆ‘è‡ªå·±åœ¨é…ç½® 11ty çš„æ™‚å€™ç¢°åˆ°çš„ä¸€äº›å•é¡Œï¼Œä¸»è¦æ˜¯è¨˜éŒ„ä¸‹ä¾†è®“è‡ªå·±æ–¹ä¾¿æŸ¥é–±ï¼Œå¦‚æœä½ æœ‰ç›¸åŒçš„å•é¡Œçš„è©±ä¹Ÿè¨±å¯ä»¥åƒè€ƒçœ‹çœ‹ã€‚

### ä¿®æ”¹ markdownã€Œ#ã€çš„æ¸²æŸ“ä½ç½®

```javascript
/* Markdown Overrides */
let markdownLibrary = markdownIt({
  html: true,
  breaks: true,
  linkify: true
}).use(markdownItAnchor, {
  permalink: true,
  permalinkClass: 'direct-link',
  permalinkSymbol: '#',
  permalinkBefore: true // <- é€™å€‹
})
```

### æˆ‘çš„ code block ä¸­åŒ…å« nunjucks èªæ³•

æƒ³åƒä¸€ä¸‹å¦‚æœä½ åœ¨å¯«æ–‡ç« æ™‚ï¼Œcode block å‰›å¥½è¦å‘ˆç¾ä¸€æ®µ nunjucks çš„ç¨‹å¼ç¢¼ç‰‡æ®µï¼š

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ title }}</title>
  </head>
  <body>
    {{ content | safe }}
  </body>
</html>
```

å¦‚æœä½ ç›´æ¥é€™æ¨£å­å¯«çš„è©±ï¼Œç•¶ 11ty ç¢°åˆ° `{{ content | safe }}` æ™‚ï¼ŒæœƒçœŸçš„å»æŠŠä»–ç•¶æˆ nunjucks ä¾†è§£æï¼Œç„¶å¾Œå°±å‡ºç¾éŒ¯èª¤äº†ã€‚

è€å¯¦èªªæˆ‘ç•¶åˆåœ¨ google æ™‚ä¸€ç›´æ‰¾ä¸åˆ°æœ‰äººç¢°åˆ°é¡ä¼¼çš„å•é¡Œï¼Œæœ‰å¯èƒ½æ˜¯æˆ‘ä¸‹çš„é—œéµå­—ä¸å¥½ï¼Œä¹Ÿæœ‰å¯èƒ½çœŸçš„æ²’äººè¨è«–åˆ°é€™äº›ã€‚ç¸½ä¹‹ï¼Œå¾Œä¾†å•äº†é€™é™£å­å¾ˆå¤¯çš„ [Chat GPT](https://openai.com/blog/chatgpt/) ä»¥å¾Œï¼Œå¾—åˆ°çš„è§£ç­”æ˜¯ä½ å¯ä»¥é€™æ¨£è™•ç†ï¼š

![](https://i.imgur.com/dqLrFAw.png)

æŠŠæ•´å€‹ã€Œ\`\`\`ã€ çš„éƒ¨åˆ†ç”¨`raw ... endraw` ä¾†åŒ…ä½ï¼Œé€™æ¨£å­ `{}`å°±æœƒè¢«ç•¶ä½œç´”æ–‡å­—ä¾†è™•ç†ï¼Œä¸æœƒè¢«ç•¶æˆ nunjucks ä¾†è§£æã€‚

### æ²’ç”¨åˆ°çš„ class è‡ªå‹•è¢«æ¸…æ‰

é€™æ˜¯åœ¨å¯«æ·±è‰²ä¸»é¡Œçš„æ™‚å€™ç¢°åˆ°çš„å•é¡Œã€‚ä¸€èˆ¬åœ¨æˆ‘å€‘æœƒé€éæ ¹å…ƒç´ ä¸Šçš„ `class` ä¾†ç•¶ä½œåˆ‡æ›ä¸»é¡Œçš„ flagï¼Œæ‰€ä»¥å¯èƒ½å°±æœƒå¯«å‡ºé¡ä¼¼é€™æ¨£çš„ cssï¼š

```css
body {
  background: black;
  color: white;
}

body.light {
  background: white;
  color: black;
}
```

ç„¶è€Œå¯¦éš›åœ¨ç”¨çš„æ™‚å€™æœƒç¢°åˆ°**æ˜æ˜å·²ç¶“ç”¨ JS åŠ ä¸Šå°æ‡‰çš„ `class` å»æ²’æœ‰åæ‡‰çš„å•é¡Œ**ã€‚

å¾Œä¾†ç™¼ç¾æ˜¯å› ç‚º [eleventy-high-performance-blog](https://github.com/google/eleventy-high-performance-blog) é€™å¥—æ¨¡æ¿ä¸­ä½¿ç”¨äº† [Purgecss](https://purgecss.com/)ï¼Œå®ƒçš„å…¶ä¸­ä¸€é …åŠŸèƒ½å°±æ˜¯æœƒæŠŠ**æ²’ç”¨åˆ°çš„ class çµ¦æ¸…æ‰**ã€‚è€Œå•é¡Œå‡ºåœ¨ä¸€é–‹å§‹çš„ `body` æ²’æœ‰ç”¨åˆ° `light` é€™å€‹ classï¼Œæ‰€ä»¥å°±ç›´æ¥è¢«ç•¶æˆæ²’ç”¨çš„ class çµ¦æ¸…æ‰äº† QQ

æ¥è‘—çˆ¬äº†ä¸€ä¸‹ Purgecss çš„å®˜æ–¹æ–‡ä»¶æ‰¾åˆ°äº† [é€™æ®µ](https://purgecss.com/safelisting.html)ï¼Œè£¡é¢å‘Šè¨´æˆ‘å€‘å¯ä»¥å‚³å…¥ç›¸é—œçš„ config ä¾†åšèª¿æ•´ï¼Œé€™é‚Šæ˜¯ä½¿ç”¨ `safelist` ä¾†è™•ç†ï¼š

```javascript
const purged = await new PurgeCSS().purge({
  content: [
    {
      raw: rawContent,
      extension: 'html'
    }
  ],
  css: [
    {
      raw: before
    }
  ],
  /*extractors: [
    {
      extractor: require("purge-from-html").extract,
      extensions: ["html"],
    },
  ],*/
  fontFace: true,
  variables: true,
  safelist: ['light', 'open'] // <- åŠ å…¥ safelist
})
```

åªè¦æ˜¯å‡ºç¾åœ¨ `safelist` ä¸­çš„ classï¼Œå°±ç®—æ²’æœ‰å¯¦éš›ä½¿ç”¨ä¹Ÿä¸æœƒè¢«æ¸…é™¤ï¼Œæ‰€ä»¥å°±èƒ½è§£æ±ºå‰›å‰›çš„å•é¡Œäº†ã€‚

### è‡ªè¨‚å­—é«”æœ‰æ™‚å€™èƒ½è¼‰å…¥ï¼Œæœ‰æ™‚å€™ä¸è¡Œï¼Ÿ

é€™å€‹ç›´æ¥çœ‹åœ–å¯èƒ½æ¯”è¼ƒå¥½ç†è§£ï¼š

![](https://i.imgur.com/YyR5A7y.gif)

å¯ä»¥çœ‹åˆ° Peanu çš„éƒ¨åˆ†ä¸€ä¸‹æœ‰å¥—ç”¨å­—å‹ï¼Œä¸€ä¸‹æ²’æœ‰çš„å•é¡Œã€‚

èµ·åˆæˆ‘ä»¥ç‚ºæ˜¯å­—é«”è¼‰å…¥ä¸æ­£å¸¸çš„é—œä¿‚è€Œå¼•èµ·çš„ï¼Œä½†å¾Œä¾†æª¢æŸ¥ç¢ºå®šå­—é«”æ˜¯æœ‰æ­£å¸¸è¼‰å…¥çš„ï¼Œæ‰€ä»¥å›°æƒ‘äº†ä¸€æ®µæ™‚é–“ã€‚

å¾Œä¾†æ‡·ç–‘æ˜¯ [eleventy-high-performance-blog](https://github.com/google/eleventy-high-performance-blog) è¨­å®šå„ªåŒ–æ™‚å‡ºçš„å•é¡Œï¼Œæ‰€ä»¥åˆ°è£¡é¢ç ”ç©¶äº†ä¸€ä¸‹ï¼Œç™¼ç¾ `optimize-html.js` ä¸­æœ‰ä¸€æ®µè·Ÿ `font-family` ç›¸é—œçš„è™•ç†ï¼š

```javascript
const purifyCss = async (rawContent, outputPath) => {
  // ...
  let content = rawContent
  if ( ... ) {
    let before = require('fs').readFileSync('css/main.css', {
      encoding: 'utf-8'
    })

    // é€™ä¸€è¡Œ ğŸ‘‡
    before = before.replace(/@font-face {/g, '@font-face {font-display:optional;')

    // ...
  }
  return content
}
```

é€™è¡Œçš„ç”¨é€”æ˜¯å¹«æ‰€æœ‰ `@font-face` åŠ ä¸Š `font-display:optional` çš„è¨­å®šã€‚

æœç„¶ï¼ŒæŠŠé€™ä¸€è¡Œè¨»è§£æ‰å¾Œå°±ä¸æœƒå‡ºç¾å‰é¢çš„å•é¡Œäº†ï¼Œä¸éåŸå› æ˜¯ï¼Ÿ

å¾Œä¾†çˆ¬äº†ä¸€ä¸‹ `font-display` çš„ç”¨æ³•ï¼Œçœ‹åˆ°äº† [é€™ç¯‡æ–‡ç« ](https://www.astralweb.com.tw/use-font-display-to-improve-and-optimize-website/) å¯«å¾—é‚„è »æ¸…æ¥šçš„ï¼Œå¾ˆæ¨è–¦è®€ä¸€ä¸‹é †ä¾¿å­¸ä¸€äº›æ–°çŸ¥è­˜ï¼Œé€™é‚Šç›´æ¥æˆªéŒ„è©²æ–‡ç« å° `font-display:optional` çš„èªªæ˜ï¼š

> æ­¤å€¼æœƒè‡ªè¡Œåˆ¤å®šæ˜¯å¦è¦åŠ è¼‰ä½¿ç”¨è€…çš„è‡ªå®šç¾©å­—å‹ï¼Œå–æ±ºæ–¼ä½¿ç”¨ç”¨æˆ¶çš„ç¶²è·¯ç’°å¢ƒï¼Œå°æ–¼ç¶²é€Ÿéæ…¢ã€æ”¶è¨Šè¼ƒå·®çš„ä½¿ç”¨è€…ä¾†èªªç›¸ç•¶åˆé©ï¼Œå¯ä»¥çœå»ä¸å¿…è¦çš„ä¸‹è¼‰æ™‚é–“ä¸¦é †åˆ©åœ°æª¢è¦–å…§å®¹ã€‚

æ‰€ä»¥ï¼Œç¸½çµä¾†èªªå•é¡Œå‡ºåœ¨ç¶²è·¯çš„ä¸‹è¼‰é€Ÿåº¦ã€‚

é›–ç„¶é€™å€‹ feature å¯ä»¥æ¸›å°‘ç¶²é çš„è¼‰å…¥æ™‚é–“ï¼Œä½†æˆ‘æœ€å¾Œé‚„æ˜¯æ‹¿æ‰äº†ã€‚å› ç‚ºä»¥æˆ‘ç›®å‰æ¶çš„éƒ¨è½æ ¼ä¾†èªªï¼Œå¯¦éš›ä½¿ç”¨çš„å­—é«”æª”æ¡ˆä¸¦ä¸å¤šï¼Œæ‰€ä»¥æˆ‘è¦ºå¾—å¤šèŠ±ä¸€äº›æ™‚é–“ä¾†é¡¯ç¤ºæˆ‘æƒ³è¦çš„å­—é«”æ˜¯ OK çš„ã€‚

å¦‚æœä½ æ˜¯å°ç¶²ç«™çš„è¼‰å…¥é€Ÿåº¦å¾ˆè¬›ç©¶çš„äººï¼Œå»ºè­°é‚„æ˜¯ç•™è‘—æ¯”è¼ƒå¥½ã€‚

## åƒè€ƒè³‡æ–™

- [Nunjucks å®˜æ–¹æ–‡ä»¶](https://mozilla.github.io/nunjucks/templating.html)
- [11ty å®˜æ–¹æ–‡ä»¶](https://www.11ty.dev/docs/)

{% endraw %}
